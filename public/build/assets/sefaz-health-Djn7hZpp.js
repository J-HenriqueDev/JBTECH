document.addEventListener("DOMContentLoaded",function(){const l=`${document.documentElement.getAttribute("data-base-url")}/admin/fiscal/health`;function a(){fetch(l,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(e=>e.json()).then(e=>{d(e),m(e)}).catch(e=>console.error("Erro ao verificar status SEFAZ:",e))}function d(e){const t=document.getElementById("stat-notas-detectadas"),n=document.getElementById("stat-xmls-completos"),s=document.getElementById("stat-processamento-pendente");t&&(t.innerText=e.notasDetectadas),n&&(n.innerText=e.xmlsCompletos),s&&(s.innerText=e.processamentoPendente);const o=document.getElementById("badge-soneca"),i=document.getElementById("badge-ativo"),c=document.getElementById("soneca-timer");e.sonecaMinutos>0?(o&&(o.style.display="flex"),i&&(i.style.display="none"),c&&(c.innerText=e.sonecaMinutos)):(o&&(o.style.display="none"),i&&(i.style.display="flex"))}function m(e){const t=document.getElementById("sidebar-sefaz-soneca-badge"),n=document.getElementById("sidebar-sefaz-badge"),s=document.getElementById("sidebar-soneca-timer");e.sonecaMinutos>0?(t&&(t.style.display="inline-flex"),n&&(n.style.display="none"),s&&(s.innerText=e.sonecaMinutos+"m")):(t&&(t.style.display="none"),n&&(n.style.display="inline-flex"))}a(),setInterval(a,6e4)});
